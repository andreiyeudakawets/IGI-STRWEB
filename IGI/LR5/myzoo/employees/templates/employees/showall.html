
{% extends 'base.html' %}

{% block content %}
    <h1>Employee List</h1>
    <ul>
        {% if user.is_superuser %}
        <a href="/employees/add/">Add employee</a> <br><br>

        <form action="{% url 'employees:search_employees' %}" method="GET">
            <input type="text" name="q" placeholder="Search by room" value="{{ search_query }}">
            <button type="submit">Search</button>
        </form>
        {% endif %}
        {% for employee in employees %}
            <li>
                {% if employee.user.is_superuser %}

                {% else %}
                    {% if employee.image %}
                        <img src="{{ employee.image.url }}" alt="{{ employee.user.name }} Image" height="100">
                    {% else %}
                        No photo available
                    {% endif %}
                {% endif %}

                {{ employee }} - {{ employee.position.title }}. {{ employee.room.title }} | {{ employee.phone_number }}
                {% if user.is_superuser %}
                    <a href="/employees/edit-employee/{{ employee.id }}/">Edit</a> |
                    <a href="/employees/delete-employee/{{ employee.id }}/">Delete</a> <br><br></li>
                {% endif %}
        {% empty %}
            <li>No employees found.</li>
        {% endfor %}
    </ul>
{% endblock %}